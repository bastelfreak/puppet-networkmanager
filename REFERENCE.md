# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`networkmanager`](#networkmanager): Manages NetworkManager connections

#### Private Classes

* `networkmanager::service`: Ensure and restarts NetworkManager Service

### Defined types

* [`networkmanager::dns`](#networkmanagerdns): Manages the DNS informations about a particular NetworkManager connection

## Classes

### <a name="networkmanager"></a>`networkmanager`

Manages NetworkManager connections

#### Examples

##### using simple include

```puppet
include networkmanager
```

##### using class

```puppet
class {'networkmanager':
    enable_global_dns     => false,
    manage_dns            => true,
    nameservers           => ['8.8.8.8', '8.8.4.4', '1.1.1.1'].
    dns_searchdomains     => ['example.com', 'uhu-banane.de', 'uhu-banane.net'],
    dns_options           => ['timeout:1', 'attempts:2', 'use-vc'],
    manage_service        => true.
    ensure_service        => running,
    enable_service        => true,
    dns_notify_daemon     => false,
    connection_dnsoptions => {
      wifi1               => {
        nameservers       => ['172.28.1.2', '172.30.1.2'],
        searchdomains     => ['home.example.com'],
        dns_options       => ['timeout:3, 'attempts:3', 'use-vc'],
        notify_daemon     => true,
      },
    },
}
```

##### using hieradata

```yaml
---
networkmanager::enable_global_dns: false
networkmanager::manage_dns: true
networkmanager::nameservers:
  - '8.8.8.8'
  - '8.8.4.4'
  - '1.1.1.1'
networkmanager::dns_searchdomains:
  - 'example.com'
  - 'uhu-banane.de'
  - 'uhu-banane.net'
networkmanager::dns_options:
  - 'timeout:1'
  - 'attempts:2'
  - 'use-vc'
networkmanager::manage_service: true
networkmanager::ensure_service: running
networkmanager::enable_service: true
networkmanager::dns_notify_daemon: false
networkmanager::connection_dnsoptions:
  wifi1:
    nameservers:
      - '172.28.1.2'
      - '172.30.1.2'
    searchdomains:
      - 'home.example.com'
    dns_options:
      - 'timeout:3'
      - 'attempts:3'
      - 'use-vc'
    notify_daemon: true
```

#### Parameters

The following parameters are available in the `networkmanager` class:

* [`enable_global_dns`](#enable_global_dns)
* [`global_nameservers`](#global_nameservers)
* [`global_searchdomains`](#global_searchdomains)
* [`global_dns_options`](#global_dns_options)
* [`global_conffile`](#global_conffile)
* [`manage_dns`](#manage_dns)
* [`nameservers`](#nameservers)
* [`dns_searchdomains`](#dns_searchdomains)
* [`dns_options`](#dns_options)
* [`manage_service`](#manage_service)
* [`service_ensure`](#service_ensure)
* [`service_name`](#service_name)
* [`enable_service`](#enable_service)
* [`restart_service`](#restart_service)
* [`dns_notify_daemon`](#dns_notify_daemon)
* [`connection_dnsoptions`](#connection_dnsoptions)
* [`ensure_service`](#ensure_service)

##### <a name="enable_global_dns"></a>`enable_global_dns`

Data type: `Boolean`

By enabling this, NetworkManager will not use the connections specific dns settings.
Instead it will generate a file with the desired dns settings.
Those parameters are then the default, even if connection specific settings are present.

##### <a name="global_nameservers"></a>`global_nameservers`

Data type: `Array[Stdlib::IP::Address::Nosubnet]`

An array of the IP addresses for the nameservers for the global setting.

##### <a name="global_searchdomains"></a>`global_searchdomains`

Data type: `Array[String[1]]`

An array of DNS search domains for the global setting.

##### <a name="global_dns_options"></a>`global_dns_options`

Data type: `Optional[Variant[Array[String[1]], String]]`

A string or an array of strings with resolving options for the global setting.
If omitted, no global resolving optios are set.

##### <a name="global_conffile"></a>`global_conffile`

Data type: `Optional[Stdlib::Absolutepath]`

The config file for global dns settings. Should be under /etc/NetworkManager/conf.d

##### <a name="manage_dns"></a>`manage_dns`

Data type: `Boolean`

Whether we want to manage dns of the primary NetworkManager connection.

##### <a name="nameservers"></a>`nameservers`

Data type: `Array[Stdlib::IP::Address::Nosubnet]`

An array of the IP addresses of the resolvers to use for the primary NetworkManager connection.
At least one address has to be given, but if exactly one address is given, a warning will be omitted.

##### <a name="dns_searchdomains"></a>`dns_searchdomains`

Data type: `Array[String[1], 1]`

An array of DNS search domains to use for the primary NetworkManager connection.
At least one domain has to be given.

##### <a name="dns_options"></a>`dns_options`

Data type: `Optional[Variant[Array[String[1]], String]]`

A string or an array of strings with resolving options to use for the primary NetworkManager connection.
Please note not to use whitespaces inside the strings, only use comma to separate options inside
a string. If not given (or undef), the options are not managed.
To remove existing options use an empty string '' as a value.

##### <a name="manage_service"></a>`manage_service`

Data type: `Boolean`

Whether we want to manage the NetworkManager service.

##### <a name="service_ensure"></a>`service_ensure`

Whether a service should be running. Valid values are 'stopped', 'running', true, false.

##### <a name="service_name"></a>`service_name`

Data type: `String[1]`

The systemd service name of NetworkManager, usually 'NetworkManager'.

##### <a name="enable_service"></a>`enable_service`

Data type: `Boolean`

Whether a service should be enabled to start at boot.

##### <a name="restart_service"></a>`restart_service`

Data type: `Optional[String[1]]`

Specify a restart command manually. If left unspecified, the service will be stopped and then started.

##### <a name="dns_notify_daemon"></a>`dns_notify_daemon`

Data type: `Boolean`

A boolean flag, whether to notify the NetworkManager daemon after DNS changea on the primary
NetworkManager connections. In case of a notification the NetworkManager daemon is rewriting
/etc/resolv.conf immediately. In this way this resorce can be used to manage /etc/resolv.conf.
**CAUTION**: If you are using another module for managing /etc/resolv.conf (like saz-resolv_conf),
this option should be set to false to prevent a Ping-Pong game between those two modules. In this
case manage_dns is only intended to ensure a correct /etc/resolv.conf immediately after a reboot.

Default value: ``true``

##### <a name="connection_dnsoptions"></a>`connection_dnsoptions`

Data type: `Optional[Hash]`

A hash for creating networkmanager::dns resources for managing DNS options on different NetworkManager
connections. Be sure not to include the primary NetworkManager connection, if manage_dns is true.

Default value: ``undef``

##### <a name="ensure_service"></a>`ensure_service`

Data type: `Optional[Variant[Boolean, String[1]]]`



## Defined types

### <a name="networkmanagerdns"></a>`networkmanager::dns`

Manages the DNS informations about a particular NetworkManager connection

#### Examples

##### 

```puppet
networkmanager::dns { 'System link':
    nameservers   => ['8.8.8.8', '8,.8.4.4', '1.1.1.1'],
    searchdomains => ['example.com', 'uhu-banane.de', 'uhu-banane.net'],
    dns_options   => ['timeout:1', 'attempts:2', 'use-vc'],
    notify_daemon => true,
}
```

#### Parameters

The following parameters are available in the `networkmanager::dns` defined type:

* [`nameservers`](#nameservers)
* [`searchdomains`](#searchdomains)
* [`dns_options`](#dns_options)
* [`connection`](#connection)
* [`notify_daemon`](#notify_daemon)

##### <a name="nameservers"></a>`nameservers`

Data type: `Array[Stdlib::IP::Address::Nosubnet, 1]`

An array of the IP addresses of the resolvers to use. At least one address has to be given,
but if exactly one address is given, a warning will be omitted.

##### <a name="searchdomains"></a>`searchdomains`

Data type: `Array[String[1], 1]`

An array of DNS search domains. At least one domain has to be given.

##### <a name="dns_options"></a>`dns_options`

Data type: `Optional[Variant[Array[String[1]], String]]`

A string or an array of strings with resolving options. Please note not to use whitespaces
inside the strings, only use comma to separate options inside a string. If not given (or undef),
the options are not managed. To remove existing options use an empty string '' as a value.

##### <a name="connection"></a>`connection`

Data type: `Optional[String[1]]`

The name of the NetworkManager connection. If not given, the name of the resource will be used
as the name of the connection.

Default value: ``undef``

##### <a name="notify_daemon"></a>`notify_daemon`

Data type: `Boolean`

A boolean flag, whether to notify the NetworkManager daemon after DNS changes. In case of a
notification the NetworkManager daemon is rewriting /etc/resolv.conf immediately. In this way
this resorce can be used to manage /etc/resolv.conf.
**CAUTION**: If you are using another module for managing /etc/resolv.conf (like saz-resolv_conf),
this option should be set to false to prevent a Ping-Pong game between those two modules. In this
case this resource is only intended to ensure a correct /etc/resolv.conf immediately after a reboot.

Default value: ``true``

